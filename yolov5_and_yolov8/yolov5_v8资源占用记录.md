# 提示

- **利用区域入侵检测算法测试yolov5和yolov8各版本模型在视频流推理时占用资源情况**

- **yolov5和yolov8官方指标对比，可以看出yolov5的mAP指标与yolov8相近**

  ![image-20240807154435429](yolov5_v8资源占用记录.assets/image-20240807154435429.png)

  ![image-20240807154519602](yolov5_v8资源占用记录.assets/image-20240807154519602.png)

- **下面的测试结果中，未标明路数时即表示1路**
- **随着路数的增加通过观察推理耗时的变化可判断推理延时情况**

- **所有的模型均用同一个视频测试，信息如下,共65*30=1950帧**

  ![image-20240807152247525](yolov5_v8资源占用记录.assets/image-20240807152247525.png)

- **测试的显卡信息如下**

  ![image-20240807152459843](yolov5_v8资源占用记录.assets/image-20240807152459843.png)

  

  

# 1.过程记录

## 1.1 yolov5

### 1.1.1  yolov5n.pt 模型大小3.8Mb 推理耗时55s 即35.5帧/s

![image-20240807101758561](yolov5_v8资源占用记录.assets/image-20240807101758561.png)

**50路，平均推理耗时250s,即8帧/s**

![image-20240807165839090](yolov5_v8资源占用记录.assets/image-20240807165839090.png)

### 1.1.2 yolov5n6.pt 模型大小6.8Mb(后面带上6的模型不不带的优化了对高分辨率图像的处理效果，但模型更大) 推理耗时68

![image-20240807102352040](yolov5_v8资源占用记录.assets/image-20240807102352040.png)

### 1.1.3 yolov5s.pt 模型大小14.1Mb 推理耗时56s

## ![image-20240807102158377](yolov5_v8资源占用记录.assets/image-20240807102158377.png)

### 1.1.4 yolov5m.pt 模型大小 40.8Mb 推理耗时63s

![image-20240807103452650](yolov5_v8资源占用记录.assets/image-20240807103452650.png)

### 1.1.5 yolov5l.pt 模型大小89.2  推理耗时76s

![](yolov5_v8资源占用记录.assets/image-20240807152843240.png)

### 1.1.6 yolov5l6.pt 模型大小147.3 推理耗时76s

![image-20240807153124174](yolov5_v8资源占用记录.assets/image-20240807153124174.png)

### **1.1.7 以上面记录的的模型yolov5l.pt做多路压力测试**

**5路，平均推理耗时89s**

![image-20240807160227531](yolov5_v8资源占用记录.assets/image-20240807160227531.png)

**10路，平均推理耗时140s**

![image-20240807161008386](yolov5_v8资源占用记录.assets/image-20240807161008386.png)

**15路，平均推理耗时193s**

![image-20240807161417273](yolov5_v8资源占用记录.assets/image-20240807161417273.png)

**20路，平均推理耗时244s，即8帧/s**

![image-20240807162310283](yolov5_v8资源占用记录.assets/image-20240807162310283.png)

**30路，平均推理耗时350s,即5.5帧/s**

![image-20240807163011268](yolov5_v8资源占用记录.assets/image-20240807163011268.png)

**45路，平均推理耗时517s，即3.7帧/s**

![image-20240807163659745](yolov5_v8资源占用记录.assets/image-20240807163659745.png)

**46路，平均推理耗时529s，即3.7帧/s**

![image-20240807164730345](yolov5_v8资源占用记录.assets/image-20240807164730345.png)

### **1.1.8 yolov5结论**

**随着路数的增加，推理时间成比例增加，即延迟增加。但路数增加到即便显存即将占满时，算力并没有时刻被占满，而是在80%-100%之间跳动。所以，虽然算力没有被占满，但路数的增加还是会导致推理速度成比例地下降。**

## 1.2 yolov8

## 1.2.1 yolov8n 模型大小6.2Mb 推理耗时51s

![image-20240807170518997](yolov5_v8资源占用记录.assets/image-20240807170518997.png)

**50路,平均推理耗时255s，即8帧/s**

![image-20240807171109029](yolov5_v8资源占用记录.assets/image-20240807171109029.png)

### 1.2.2 yolov8m.pt 模型大小49.7Mb

![image-20240807143153999](yolov5_v8资源占用记录.assets/image-20240807143153999.png)

### 1.2.3 yolov8s.pt 模型大小21.5Mb 

![image-20240807143359577](yolov5_v8资源占用记录.assets/image-20240807143359577.png)

### 1.2.4 yolov8l.pt 模型大小83.7Mb  推理耗时58s

![image-20240807144139682](yolov5_v8资源占用记录.assets/image-20240807144139682.png)

**35路，平均推理耗时555s，即3.5帧/s**

![image-20240807172225532](yolov5_v8资源占用记录.assets/image-20240807172225532.png)

# 2.结论

- **不应关注GPU算力占比，而应该关注实际测得的随着路数的增加推理耗时的情况**
- **同等大小的模型，yolov5比yolov8占用更少的显存**

